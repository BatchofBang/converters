<!DOCTYPE html>
<html>
<head>
	<title>Image Converter</title>
	<style>
		.container {
			display: flex;
			flex-direction: column;
			align-items: center;
			margin-top: 50px;
		}
		input {
			margin-bottom: 10px;
		}
		img {
			margin-top: 10px;
			max-width: 500px;
		}
		.download-btn {
			margin-top: 20px;
			padding: 10px;
			background-color: #007bff;
			color: white;
			border: none;
			border-radius: 5px;
			cursor: pointer;
		}
	</style>
</head>
<body>
	<div class="container">
		<h1>Image Converter</h1>
		<input type="file" id="input-file">
		<label for="new-width">New width:</label>
		<input type="number" id="new-width">
		<label for="new-height">New height:</label>
		<input type="number" id="new-height">
		<label for="output-format">Output format:</label>
		<select id="output-format">
			<option value="jpeg">JPEG</option>
			<option value="png">PNG</option>
			<option value="webp">WebP</option>
		</select>
		<button id="convert-btn">Convert</button>
		<img id="output-image">
		<a id="download-link" download><button class="download-btn">Download</button></a>
	</div>

	<script>
		const inputFile = document.getElementById('input-file');
		const newWidth = document.getElementById('new-width');
		const newHeight = document.getElementById('new-height');
		const outputFormat = document.getElementById('output-format');
		const convertBtn = document.getElementById('convert-btn');
		const outputImage = document.getElementById('output-image');
		const downloadLink = document.getElementById('download-link');

		convertBtn.addEventListener('click', () => {
			const file = inputFile.files[0];
			if (!file) {
				alert('Please select an image file');
				return;
			}

			const reader = new FileReader();
			reader.onload = () => {
				const img = new Image();
				img.onload = () => {
					const canvas = document.createElement('canvas');
					canvas.width = newWidth.value || img.width;
					canvas.height = newHeight.value || img.height;

					const ctx = canvas.getContext('2d');
					ctx.drawImage(img, 0, 0, canvas.width, canvas.height);

					const dataURL = canvas.toDataURL(`image/${outputFormat.value}`);
					outputImage.src = dataURL;
					downloadLink.href = dataURL;
				};
				img.src = reader.result;
			};
			reader.readAsDataURL(file);
		});
	</script>
</body>
</html>
